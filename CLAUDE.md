# Claude Code Web Frontend 项目

## 项目概述
本项目旨在利用 Claude 模型构建一个多智能体（Multi-Agent）系统，开发一个方便、易用且具备现代化交互体验的 Claude Code Web 页面。该页面提供类似 ChatGPT 的对话界面，让用户能够直接在网页上与 Claude Code 进行交互。

系统通过精确的角色分工和严格的日志记录，确保开发过程的高效和成果的稳定。

## 核心 Agent 角色与职责

### 协调者 (Coordinator)
- **角色**：项目总负责人和产品经理
- **核心职责**：
  - 接收并分解用户需求（如"开发一个能显示代码和运行结果的对话框"）
  - 将任务分解为 UI 设计、接口逻辑实现、日志系统集成等子任务
  - 整合所有 Agent 的输出，确保最终页面符合设计和功能要求

### 界面设计师 (UI/UX Designer)
- **角色**：页面美学专家和用户体验设计师
- **核心职责**：
  - 创建 HTML/CSS 结构：负责页面整体布局、组件样式和响应式设计
  - 交互效果：实现流畅的对话框滚动、加载动效、代码高亮等交互细节
  - 关注点：专注于界面的美观、可用性和一致性

### 逻辑开发者 (Logic Developer)
- **角色**：页面功能实现者和接口对接专家
- **核心职责**：
  - API 对接：根据 `/workspace/web-claude-code-api` 文件夹下的接口文档，编写 JavaScript 代码调用 API，实现与 Claude Code 后端通信
  - 数据处理：处理 API 返回的数据，如对话内容、代码块、运行结果等
  - 交互逻辑：实现用户输入、发送请求、接收响应等核心功能

### 审核者 (Reviewer)
- **角色**：代码质量控制官和功能测试员
- **核心职责**：
  - 代码审查：检查界面设计师和逻辑开发者提交的代码，确保符合规范、可读性强、性能良好
  - 功能测试：在开发环境中模拟用户行为，测试所有功能是否按预期工作，特别是与 API 的交互
  - 日志审查：检查日志系统是否正确记录了所有关键信息

## 前端开发工作流程示例

**任务**：创建一个可发送文本并显示响应的对话框

1. **协调者**：将任务分解为 UI 设计（对话框样式）、逻辑开发（API 请求和响应处理）
2. **协调者**：将 UI 设计任务交给界面设计师
3. **界面设计师**：创建对话框的 HTML 结构和 CSS 样式，并发送给逻辑开发者
4. **逻辑开发者**：
   - 首先：根据 `/workspace/web-claude-code-api` 的文档，编写处理用户输入的函数
   - 然后：编写调用 API 的异步函数，并处理返回的对话内容和代码
   - 最后：将处理后的内容渲染到界面设计师创建的对话框中
5. **逻辑开发者**：完成开发后，将完整的页面代码发送给审核者
6. **审核者**：
   - 对代码进行审查，确保无误
   - 在浏览器中测试：发送文本，观察是否正确显示响应，检查 API 调用是否成功
7. **审核者**：将测试结果和反馈发送给协调者或直接通过
8. **协调者**：接收并呈现最终的页面

## 日志管理与调试

### 关键环节交互日志 (Server-side Log)
**目的**：记录用户与页面交互的每一个关键节点，用于数据分析和问题追踪

**实现**：
- 每次用户发送消息：记录消息内容、发送时间
- 每次 API 请求：记录请求参数、请求时间
- 每次 API 响应：记录响应内容、响应时间、状态码
- 每次页面加载：记录页面加载成功/失败状态

这些日志通过调用专门的日志接口发送到服务器，方便后端进行统一管理和分析。

### Console 错误日志 (Client-side Log)
**目的**：捕获前端的 JavaScript 错误，并将它们发送到服务器，便于远程调试和问题排查

**实现**：
- 全局错误捕获：使用 `window.onerror` 和 `window.addEventListener('unhandledrejection', ...)` 等事件监听器，捕获未被处理的 JavaScript 运行时错误和 Promise 拒绝
- 日志发送：将捕获到的错误信息（包括错误消息、文件名、行号、堆栈信息等）封装成 JSON 对象，并通过专门的日志 API 请求发送到服务器
- 方便 Debug：服务器日志以结构化格式（如 JSON）保存，便于日志分析工具（如 ELK Stack）进行检索和分析，让开发者快速定位问题源头

## 技术栈
- 前端框架：原生 JavaScript / 现代前端框架（React/Vue 等，根据需求确定）
- 样式：CSS3 + 响应式设计
- API 通信：Fetch API / Axios
- 日志系统：自定义日志收集器
- 代码高亮：Prism.js / highlight.js（根据需求确定）
